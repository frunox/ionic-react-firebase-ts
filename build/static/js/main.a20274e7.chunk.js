(this.webpackJsonpmemories=this.webpackJsonpmemories||[]).push([[1],{26:function(e,t,n){"use strict";var r=n(0),o=n.n(r).a.createContext({memories:[],addMemory:function(){},initContext:function(){}});t.a=o},61:function(e,t,n){e.exports=n(89)},66:function(e,t,n){var r={"./pwa-action-sheet.entry.js":[94,60],"./pwa-camera-modal-instance.entry.js":[95,61],"./pwa-camera-modal.entry.js":[96,62],"./pwa-camera.entry.js":[97,63],"./pwa-toast.entry.js":[98,64]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=66,e.exports=o},69:function(e,t,n){var r={"./ion-action-sheet.entry.js":[100,7],"./ion-alert.entry.js":[101,8],"./ion-app_8.entry.js":[102,10],"./ion-avatar_3.entry.js":[103,20],"./ion-back-button.entry.js":[104,21],"./ion-backdrop.entry.js":[105,46],"./ion-button_2.entry.js":[106,22],"./ion-card_5.entry.js":[107,23],"./ion-checkbox.entry.js":[108,24],"./ion-chip.entry.js":[109,25],"./ion-col_3.entry.js":[110,47],"./ion-datetime_3.entry.js":[111,13],"./ion-fab_3.entry.js":[112,26],"./ion-img.entry.js":[113,48],"./ion-infinite-scroll_2.entry.js":[114,49],"./ion-input.entry.js":[115,27],"./ion-item-option_3.entry.js":[116,28],"./ion-item_8.entry.js":[117,29],"./ion-loading.entry.js":[118,30],"./ion-menu_3.entry.js":[119,31],"./ion-modal.entry.js":[120,11],"./ion-nav_2.entry.js":[121,17],"./ion-popover.entry.js":[122,12],"./ion-progress-bar.entry.js":[123,32],"./ion-radio_2.entry.js":[124,33],"./ion-range.entry.js":[125,34],"./ion-refresher_2.entry.js":[126,14],"./ion-reorder_2.entry.js":[127,19],"./ion-ripple-effect.entry.js":[128,50],"./ion-route_4.entry.js":[129,35],"./ion-searchbar.entry.js":[130,36],"./ion-segment_2.entry.js":[131,37],"./ion-select_3.entry.js":[132,38],"./ion-slide_2.entry.js":[133,51],"./ion-spinner.entry.js":[134,16],"./ion-split-pane.entry.js":[135,52],"./ion-tab-bar_2.entry.js":[136,39],"./ion-tab_2.entry.js":[137,18],"./ion-text.entry.js":[138,40],"./ion-textarea.entry.js":[139,41],"./ion-toast.entry.js":[140,42],"./ion-toggle.entry.js":[141,15],"./ion-virtual-scroll.entry.js":[142,53]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=69,e.exports=o},71:function(e,t,n){var r={"./ion-icon.entry.js":[144,68]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=71,e.exports=o},76:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(35),i=n.n(a),c=n(60),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=n(2),m=n(54),f=n(16),d=n(12),y=n(26),j=(n(76),function(e){return o.a.createElement(u.e,{className:"memory-item"},o.a.createElement("img",{src:e.image,alt:e.title}),o.a.createElement(u.f,null,o.a.createElement(u.g,null,e.title)))}),p=function(e){return o.a.createElement(o.a.Fragment,null,e.items.map((function(e){return o.a.createElement(u.u,{key:e.id},o.a.createElement(u.h,null,o.a.createElement(j,{image:e.base64Url,title:e.title})))})),";")},h=function(e){return o.a.createElement(u.j,{vertical:"bottom",horizontal:"end",slot:"fixed"},o.a.createElement(u.k,{routerLink:e.link},o.a.createElement(u.n,{icon:e.icon})))},g=function(e){return o.a.createElement(u.d,{slot:"end"},o.a.createElement(u.c,{color:"dark",routerLink:e.link},o.a.createElement(u.n,{slot:"icon-only",icon:e.icon})))},b=function(e){return o.a.createElement(u.r,null,o.a.createElement(u.m,null,o.a.createElement(u.C,null,o.a.createElement(u.B,null,e.title),Object(u.L)("ios")&&o.a.createElement(g,{link:"/new-memory",icon:d.a}))),o.a.createElement(u.i,null,o.a.createElement(u.l,null,0===e.memories.length&&o.a.createElement(u.u,null,o.a.createElement(u.h,{className:"ion-text-center"},o.a.createElement("h2",null,e.fallbackText))),o.a.createElement(p,{items:e.memories})),!Object(u.L)("ios")&&o.a.createElement(h,{link:"/new-memory",icon:d.a})))},E=function(){var e=Object(r.useContext)(y.a).memories.filter((function(e){return"good"===e.type}));return o.a.createElement(b,{title:"Good Memories",fallbackText:"No good memories found",memories:e})},v=function(){var e=Object(r.useContext)(y.a).memories.filter((function(e){return"bad"===e.type}));return o.a.createElement(b,{title:"Bad Memories",fallbackText:"No bad memories found",memories:e})},w=(n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),o.a.lazy((function(){return n.e(9).then(n.bind(null,164))}))),k=function(){var e=Object(r.useContext)(y.a).initContext;return Object(r.useEffect)((function(){console.log("1. in APP, run initContext in MCP"),e()}),[e]),o.a.createElement(u.a,null,o.a.createElement(m.a,null,o.a.createElement(o.a.Suspense,{fallback:o.a.createElement(u.x,null)},o.a.createElement(u.A,null,o.a.createElement(u.t,null,o.a.createElement(f.b,{path:"/good-memories"},o.a.createElement(E,null)),o.a.createElement(f.b,{path:"/bad-memories"},o.a.createElement(v,null)),o.a.createElement(f.b,{path:"/new-memory"},o.a.createElement(w,null)),o.a.createElement(f.a,{to:"/good-memories"})),o.a.createElement(u.y,{slot:"bottom"},o.a.createElement(u.z,{href:"/good-memories",tab:"good"},o.a.createElement(u.n,{icon:d.j}),o.a.createElement(u.q,null,"Good Memories")),o.a.createElement(u.z,{href:"/bad-memories",tab:"bad"},o.a.createElement(u.n,{icon:d.o}),o.a.createElement(u.q,null,"Bad Memories")))))))},x=n(56),O=n(5),_=n.n(O),C=n(38),P=n(11),M=n(34),N=n(21),S=n(58),U=N.e.Storage,D=N.e.Filesystem,L=function(e){var t=Object(r.useState)([]),n=Object(M.a)(t,2),a=n[0],i=n[1];Object(r.useEffect)((function(){console.log("2. In MCP useEffect # of memories",a.length);var e=a.map((function(e){return console.log("in MCP useEffect map",e.title),{id:e.id,title:e.title,imagePath:e.imagePath,type:e.type}}));U.set({key:"memories",value:JSON.stringify(e)}),console.log("3. After Storage.set, memories.length",a.length)}),[a]);var c=function(){var e=Object(P.a)(_.a.mark((function e(t,n,r){var o,a,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(new Date).getTime()+".jpeg",e.next=3,Object(S.a)(t.preview);case 3:a=e.sent,D.writeFile({path:o,data:a,directory:N.d.Data}),c={id:Math.random().toString(),title:n,type:r,imagePath:o,base64Url:a},i((function(e){return[].concat(Object(C.a)(e),[c])}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),l=Object(r.useCallback)(Object(P.a)(_.a.mark((function e(){var t,n,r,o,a,c,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("### starting MCP initContext"),e.next=3,U.get({key:"memories"});case 3:t=e.sent,n=t.value?JSON.parse(t.value):[],console.log("4. in initContext, storedMemories",JSON.stringify(n)),r=[],o=Object(x.a)(n),e.prev=8,o.s();case 10:if((a=o.n()).done){e.next=19;break}return c=a.value,e.next=14,D.readFile({path:c.imagePath,directory:N.d.Data});case 14:l=e.sent,console.log("5. in MCP initContext for loop",c.title),r.push({id:c.id,title:c.title,type:c.type,imagePath:c.imagePath,base64Url:"data:image/jpeg;base64,"+l.data});case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:i(r);case 28:case"end":return e.stop()}}),e,null,[[8,21,24,27]])}))),[]);return o.a.createElement(y.a.Provider,{value:{memories:a,addMemory:c,initContext:l}},e.children)};i.a.render(o.a.createElement(L,null,o.a.createElement(k,null)),document.getElementById("root")),Object(c.a)(window),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()}},[[61,3,6]]]);
//# sourceMappingURL=main.a20274e7.chunk.js.map